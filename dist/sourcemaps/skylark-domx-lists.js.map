{"version":3,"sources":["skylark-domx-lists.js"],"names":["define","skylark","attach","langx","$","elmx","plugins","lists","Group","Plugin","inherit","klassName","pluginName","options","multiSelect","classes","active","selectors","item","template","checkable","icon","text","selected","state","Object","_construct","elm","this","overrided","self","velm","_velm","_elm","itemSelector","_$items","on","veItem","hasClass","value","data","undefined","index","_refresh","updates","findItem","valueOrIdx","isNumber","eq","filter","oldValue","removeClass","addClass","selectOneItem","register","Collapsable","_MultitierList","multitier","mode","levels","children","hasChildren","toggler","collapsed","expanded","multiExpand","childrenSelector","togglerSelector","has","find","e","preventDefault","scall","closest","siblings","plugin","toggleClass","toggle","not","Foldable","Cascadable","Cascade","main"],"mappings":"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","file":"../skylark-domx-lists.js","sourcesContent":["define('skylark-domx-lists/lists',[\r\n\t\"skylark-langx/skylark\"\r\n],function(skylark){\r\n\treturn skylark.attach(\"domx.lists\",{});\r\n});\n define('skylark-domx-lists/Group',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins\",\r\n  \"./lists\"\r\n],function(langx,$,elmx,plugins,lists){\r\n\r\n    var Group = plugins.Plugin.inherit({\r\n        klassName : \"Group\",\r\n\r\n        pluginName : \"domx.lists.group\",\r\n\r\n        options : {\r\n        \tmultiSelect: false,\r\n\r\n        \tclasses : {\r\n          \tactive : \"active\"\r\n        \t},\r\n\r\n\r\n        \tselectors : {\r\n          \titem : \"li\",                   // \".list-group-item\"\r\n\r\n        \t},\r\n\r\n          item : {\r\n            template : \"<span><i class=\\\"glyphicon\\\"></i><a href=\\\"javascript: void(0);\\\"></a> </span>\",\r\n            checkable : false,\r\n            selectors : {\r\n              icon : \" > span > i\",\r\n              text : \" > span > a\"\r\n            }\r\n          },\r\n\r\n        \tselected : 0\r\n        },\r\n\r\n        state : {\r\n          selected : Object\r\n        },\r\n\r\n        _construct : function(elm,options) {\r\n            this.overrided(elm,options);\r\n            var self = this,\r\n                velm = this._velm = elmx(this._elm),\r\n                itemSelector = this.options.selectors.item;\r\n\r\n            this._$items = velm.$(itemSelector);\r\n\r\n            velm.on('click', itemSelector, function () {\r\n                var veItem = elmx(this);\r\n\r\n                if (!veItem.hasClass('disabled')) {\r\n                  var value = veItem.data(\"value\");\r\n                  if (value === undefined) {\r\n                    value = self._$items.index(this);\r\n                  }\r\n                  self.selected = value;\r\n                }\r\n\r\n                //veItem.blur();\r\n                return false;\r\n            });\r\n            this.selected = this.options.selected;\r\n\r\n        },\r\n\r\n        _refresh : function(updates) {\r\n          this.overrided(updates);\r\n          var self  = this;\r\n\r\n          function findItem(valueOrIdx) {\r\n            var $item;\r\n            if (langx.isNumber(valueOrIdx)) {\r\n              $item = self._$items.eq(valueOrIdx);\r\n            } else {\r\n              $item = self._$items.filter('[data-value=\"' + valueOrIdx + '\"]');\r\n            }\r\n            return $item;\r\n          } \r\n                 \r\n          function selectOneItem(valueOrIdx) {\r\n            findItem(valueOrIdx).addClass(self.options.classes.active);\r\n          }\r\n\r\n          function unselectOneItem(valueOrIdx) {\r\n            findItem(valueOrIdx).removeClass(self.options.classes.active);\r\n          }\r\n\r\n          if (updates[\"selected\"]) {\r\n            if (this.options.multiSelect) {\r\n            } else {\r\n              unselectOneItem(updates[\"selected\"].oldValue);\r\n              selectOneItem(updates[\"selected\"].value);\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Group);\r\n\r\n  return lists.Group = Group;\r\n\r\n});\r\n\r\n\r\n\r\n\n define('skylark-domx-lists/_MultitierList',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins\",\r\n  \"skylark-domx-toggles/Collapsable\",\r\n  \"./lists\",\r\n  \"./Group\"\r\n],function(langx,$,elmx,plugins,Collapsable,lists,Group){\r\n\r\n    var _MultitierList = Group.inherit({\r\n        klassName : \"_MultitierList\",\r\n\r\n        options : {\r\n          multitier : {\r\n            mode   : \"\",  // \"tree\" or \"accordion\" or \"popover\"\r\n            levels : 2,\r\n            selectors :  {\r\n              children : \"ul\",  // \"> .list-group\"\r\n              hasChildren : \":has(ul)\",\r\n              toggler : \" > a\"\r\n            },\r\n            classes : {\r\n              collapsed : \"\",\r\n              expanded : \"\"\r\n            },\r\n\r\n            multiExpand : true,\r\n          }\r\n        },\r\n\r\n        state : {\r\n          selected : Object\r\n        },\r\n\r\n        _construct : function(elm,options) {\r\n            this.overrided(elm,options);\r\n            var self = this,\r\n                itemSelector = this.options.selectors.item;\r\n\r\n            var multitierMode = this.options.multitier.mode,\r\n                hasChildrenSelector = this.options.multitier.selectors.hasChildren,\r\n                childrenSelector = this.options.multitier.selectors.children;           \r\n\r\n\r\n              var multiExpand = self.options.multitier.multiExpand,\r\n                  togglerSelector = self.options.multitier.selectors.toggler;\r\n\r\n              this._$items.has(childrenSelector).find(togglerSelector).on(\"click\" + \".\" + this.pluginName, function(e) {\r\n                  e.preventDefault();\r\n\r\n                  if (multiExpand) {\r\n                      langx.scall($(this).closest(itemSelector).siblings().removeClass(\"active\").children(childrenSelector+\".in\").plugin(\"domx.toggles.collapsable\"),\"hide\");\r\n                  }\r\n                  $(this).closest(itemSelector).toggleClass(\"active\").children(childrenSelector).plugin(\"domx.toggles.collapsable\").toggle();\r\n              });\r\n\r\n             this._$items.filter(\".active\").has(childrenSelector).children(childrenSelector).addClass(\"collapse in\");\r\n             this._$items.not(\".active\").has(childrenSelector).children(childrenSelector).addClass(\"collapse\");\r\n        }\r\n\r\n  });\r\n\r\n\r\n  return lists._MultitierList = _MultitierList;\r\n\r\n});\r\n\r\n\r\n\r\n\n define('skylark-domx-lists/Foldable',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins\",\r\n  \"./lists\",\r\n  \"./_MultitierList\"\r\n],function(langx,$,elmx,plugins,lists,_MultitierList){\r\n\r\n  var Foldable = _MultitierList.inherit({\r\n    klassName : \"Foldable\",\r\n\r\n    pluginName : \"domx.lists.foldable\"\r\n\r\n  });\r\n\r\n  plugins.register(Foldable);\r\n\r\n  return lists.Foldable = Foldable;\r\n});\r\n\n define('skylark-domx-lists/Cascadable',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins\",\r\n  \"./lists\",\r\n  \"./_MultitierList\"\r\n],function(langx,$,elmx,plugins,lists,_MultitierList){\r\n\r\n\r\n  var Cascadable = _MultitierList.inherit({\r\n    klassName : \"Cascadable\",\r\n\r\n    pluginName : \"domx.lists.cascadable\"\r\n  });\r\n\r\n\r\n  plugins.register(Cascadable);\r\n\r\n  return lists.Cascadable = Cascadable;\t\r\n});\n define('skylark-domx-lists/Tree',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins\",\r\n  \"./lists\",\r\n  \"./_MultitierList\"\r\n],function(langx,$,elmx,plugins,lists,_MultitierList){\r\n\r\n\r\n  var Cascade = _MultitierList.inherit({\r\n    klassName : \"Tree\",\r\n\r\n    pluginName : \"domx.lists.tree\"\r\n  });\r\n\r\n\r\n  plugins.register(Cascade);\r\n\r\n  return lists.Cascade = Cascade;\t\r\n});\ndefine('skylark-domx-lists/main',[\r\n    \"./lists\",\r\n    \"./Foldable\",\r\n    \"./Cascadable\",\r\n    \"./Group\",\r\n    \"./Tree\"\r\n], function(lists) {\r\n    return lists;\r\n});\ndefine('skylark-domx-lists', ['skylark-domx-lists/main'], function (main) { return main; });\n\n"]}