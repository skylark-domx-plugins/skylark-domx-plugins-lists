{"version":3,"sources":["Slidable.js"],"names":["define","langx","browser","noder","styler","eventer","$","plugins","touch","lists","Slidable","Plugin","inherit","klassName","pluginName","options","selectors","slidesContainer","titleElement","indicatorContainer","classes","displayClass","singleClass","leftEdgeClass","rightEdgeClass","playingClass","controlsClass","slideClass","slideLoadingClass","slideErrorClass","slideContentClass","toggleClass","prevClass","nextClass","closeClass","playPauseClass","activeIndicatorClass","displayTransition","clearSlides","toggleControlsOnReturn","toggleControlsOnSlideClick","toggleSlideshowOnSpace","enableKeyboardNavigation","closeOnEscape","closeOnSlideClick","closeOnSwipeUpOrDown","emulateTouchEvents","stopTouchEventsPropagation","hidePageScrollbars","disableScroll","carousel","continuous","unloadElements","startSlideshow","slideshowInterval","index","preloadRange","transitionSpeed","slideshowTransitionSpeed","undefined","thumbnailIndicators","onopen","onopened","onslide","onslideend","onslidecomplete","onclose","onclosed","_construct","gallery","this","overrided","_velm","elmx","list","items","num","length","initStartIndex","initWidget","initEventListeners","ontransitionend","play","createIndicator","obj","thumbnailUrl","thumbnail","indicator","indicatorPrototype","cloneNode","title","thumbnailProperty","getElementsByTagName","find","src","style","backgroundImage","addIndicator","setAttribute","appendChild","indicators","push","setActiveIndicator","activeIndicator","removeClass","addClass","slide","to","speed","window","clearTimeout","timeout","direction","naturalDirection","diff","circle","Math","abs","positions","slideWidth","move","getIndex","getNumber","prev","next","time","stop","interval","elements","debounce","bind","pause","add","i","concat","Array","prototype","slice","call","addSlide","positionSlide","initSlides","resetSlides","empty","unloadAllSlides","slides","handleClose","destroyEventListeners","hide","document","body","overflow","bodyOverflowStyle","close","that","on","support","transition","end","closeHandler","event","target","_elm","off","dist","translateX","translate","x","y","css","translateY","onresize","onmousedown","which","nodeName","preventDefault","originalEvent","touches","pageX","pageY","ontouchstart","onmousemove","touchStart","ontouchmove","onmouseup","ontouchend","onmouseout","related","relatedTarget","contains","Date","now","isScrolling","touchDelta","touchDeltaX","indices","scale","unshift","pop","indexForward","indexBackward","distanceForward","distanceBackward","isShortDuration","Number","isValidSlide","isPastBounds","isValidClose","slideHeight","ontouchcancel","defer","oncomplete","srcElement","parent","parentNode","getNodeIndex","type","clientHeight","maxHeight","onload","onerror","onkeydown","keyCode","toggleControls","stopImmediatePropagation","toggleSlideshow","handleClick","isTarget","className","hasClass","onclick","updateEdgeClasses","handleSlide","loadElements","setTitle","firstChild","text","alt","createTextNode","createElement","callback","element","renderItem","loadElement","proxyListener","limit","min","j","hasOwnProperty","unloadSlide","slidePrototype","width","left","reload","query","children","imagePrototype","elementPrototype","clientWidth","removeChild","len","parseInt","getAttribute","isTouchEnabled","handleOpen","first","openHandler","show","register"],"mappings":"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","file":"../Slidable.js","sourcesContent":["define([\r\n  'skylark-langx/langx',\r\n  'skylark-domx-browser',\r\n  'skylark-domx-noder',\r\n  'skylark-domx-styler',\r\n  'skylark-domx-eventer',\r\n  'skylark-domx-query',\r\n  'skylark-domx-plugins',\r\n  \"skylark-devices-points/touch\",\r\n  \"./lists\"\r\n], function (langx,browser, noder, styler, eventer, $,plugins,touch,lists) {\r\n  'use strict'\r\n  var Slidable = plugins.Plugin.inherit({\r\n    klassName: \"Slidable\",\r\n\r\n    pluginName : \"domx.plugins.lists.slidable\",\r\n\r\n    options: {\r\n      selectors : {\r\n        // The tag name, Id, element or querySelector of the slides container:\r\n        slidesContainer: 'div',\r\n        // The tag name, Id, element or querySelector of the title element:\r\n        titleElement: 'h3',\r\n\r\n        // The tag name, Id, element or querySelector of the indicator container:\r\n        indicatorContainer: 'ol'\r\n      },\r\n\r\n      classes : {\r\n        // The class to add when the gallery is visible:\r\n        displayClass: 'lark-domx-slidable-display',\r\n        // The class to add when the gallery only displays one element:\r\n        singleClass: 'lark-domx-slidable-single',\r\n        // The class to add when the left edge has been reached:\r\n        leftEdgeClass: 'lark-domx-slidable-left',\r\n        // The class to add when the right edge has been reached:\r\n        rightEdgeClass: 'lark-domx-slidable-right',\r\n        // The class to add when the automatic slideshow is active:\r\n        playingClass: 'lark-domx-slidable-playing',\r\n\r\n        // The class to add when the gallery controls are visible:\r\n        controlsClass: 'lark-domx-slidable-controls',\r\n\r\n        // The class for all slides:\r\n        slideClass: 'slide',\r\n        // The slide class for loading elements:\r\n        slideLoadingClass: 'slide-loading',\r\n        // The slide class for elements that failed to load:\r\n        slideErrorClass: 'slide-error',\r\n        // The class for the content element loaded into each slide:\r\n        slideContentClass: 'slide-content',\r\n        // The class for the \"toggle\" control:\r\n        toggleClass: 'toggle',\r\n        // The class for the \"prev\" control:\r\n        prevClass: 'prev',\r\n        // The class for the \"next\" control:\r\n        nextClass: 'next',\r\n        // The class for the \"close\" control:\r\n        closeClass: 'close',\r\n        // The class for the \"play-pause\" toggle control:\r\n        playPauseClass: 'play-pause',\r\n\r\n        // The class for the active indicator:\r\n        activeIndicatorClass: 'active'\r\n      },\r\n      // The list object property (or data attribute) with the object type:\r\n      //--- typeProperty: 'type',\r\n      // The list object property (or data attribute) with the object title:\r\n      //--- titleProperty: 'title',\r\n      // The list object property (or data attribute) with the object alt text:\r\n      //--- altTextProperty: 'alt',\r\n      // The list object property (or data attribute) with the object URL:\r\n      //--- urlProperty: 'href',\r\n      // The list object property (or data attribute) with the object srcset URL(s):\r\n      //--- srcsetProperty: 'urlset',\r\n      // The gallery listens for transitionend events before triggering the\r\n      // opened and closed events, unless the following option is set to false:\r\n      displayTransition: true,\r\n      // Defines if the gallery slides are cleared from the gallery modal,\r\n      // or reused for the next gallery initialization:\r\n      clearSlides: true,\r\n      // Defines if images should be stretched to fill the available space,\r\n      // while maintaining their aspect ratio (will only be enabled for browsers\r\n      // supporting background-size=\"contain\", which excludes IE < 9).\r\n      // Set to \"cover\", to make images cover all available space (requires\r\n      // support for background-size=\"cover\", which excludes IE < 9):\r\n      //--- stretchImages: false,\r\n      // Toggle the controls on pressing the Return key:\r\n      toggleControlsOnReturn: true,\r\n\r\n      // Toggle the controls on slide click:\r\n      toggleControlsOnSlideClick: true,\r\n\r\n      // Toggle the automatic slideshow interval on pressing the Space key:\r\n      toggleSlideshowOnSpace: true,\r\n\r\n      // Navigate the gallery by pressing left and right on the keyboard:\r\n      enableKeyboardNavigation: true,\r\n\r\n      // Close the gallery on pressing the Esc key:\r\n      closeOnEscape: false,\r\n\r\n      // Close the gallery when clicking on an empty slide area:\r\n      closeOnSlideClick: false,\r\n\r\n      // Close the gallery by swiping up or down:\r\n      closeOnSwipeUpOrDown: false,\r\n\r\n      // Emulate touch events on mouse-pointer devices such as desktop browsers:\r\n      emulateTouchEvents: true,\r\n\r\n      // Stop touch events from bubbling up to ancestor elements of the Gallery:\r\n      stopTouchEventsPropagation: false,\r\n\r\n      // Hide the page scrollbars:\r\n      hidePageScrollbars: false,\r\n\r\n      // Stops any touches on the container from scrolling the page:\r\n      disableScroll: true,\r\n\r\n      // Carousel mode (shortcut for carousel specific options):\r\n      carousel: false,\r\n\r\n      // Allow continuous navigation, moving from last to first\r\n      // and from first to last slide:\r\n      continuous: true,\r\n\r\n      // Remove elements outside of the preload range from the DOM:\r\n      unloadElements: true,\r\n\r\n      // Start with the automatic slideshow:\r\n      startSlideshow: false,\r\n\r\n      // Delay in milliseconds between slides for the automatic slideshow:\r\n      slideshowInterval: 5000,\r\n\r\n      // The starting index as integer.\r\n      // Can also be an object of the given list,\r\n      // or an equal object with the same url property:\r\n      index: 0,\r\n      // The number of elements to load around the current index:\r\n      preloadRange: 2,\r\n      // The transition speed between slide changes in milliseconds:\r\n      transitionSpeed: 400,\r\n      // The transition speed for automatic slide changes, set to an integer\r\n      // greater 0 to override the default transition speed:\r\n      slideshowTransitionSpeed: undefined,\r\n\r\n\r\n        // Hide the page scrollbars:\r\n      hidePageScrollbars: false,\r\n\r\n\r\n\r\n      // Defines if the gallery indicators should display a thumbnail:\r\n      thumbnailIndicators: true,\r\n\r\n\r\n      // Callback function executed when the Gallery is initialized.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopen: undefined,\r\n      // Callback function executed when the Gallery has been initialized\r\n      // and the initialization transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onopened: undefined,\r\n      // Callback function executed on slide change.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslide: undefined,\r\n      // Callback function executed after the slide change transition.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // current index and slide as arguments:\r\n      onslideend: undefined,\r\n      // Callback function executed on slide content load.\r\n      // Is called with the gallery instance as \"this\" object and the\r\n      // slide index and slide element as arguments:\r\n      onslidecomplete: undefined,\r\n      // Callback function executed when the Gallery is about to be closed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclose: undefined,\r\n      // Callback function executed when the Gallery has been closed\r\n      // and the closing transition has been completed.\r\n      // Is called with the gallery instance as \"this\" object:\r\n      onclosed: undefined\r\n    },\r\n\r\n    _construct: function (gallery, options) {\r\n      this.overrided(gallery, options);\r\n      this._velm = this.elmx();\r\n\r\n      this.list = this.options.items;\r\n      //this.options.container = this.elm();\r\n      this.num = this.list.length;\r\n\r\n      this.initStartIndex()\r\n      if (this.initWidget() === false) {\r\n        return false\r\n      }\r\n      this.initEventListeners()\r\n      // Load the slide at the given index:\r\n      this.onslide(this.index)\r\n      // Manually trigger the slideend event for the initial slide:\r\n      this.ontransitionend()\r\n      // Start the automatic slideshow if applicable:\r\n      if (this.options.startSlideshow) {\r\n        this.play()\r\n      }\r\n    },\r\n\r\n    createIndicator: function (obj) {\r\n      var gallery = this.gallery,\r\n        indicator = this.indicatorPrototype.cloneNode(false)\r\n      var title = obj.title;\r\n      var thumbnailUrl\r\n      var thumbnail\r\n      if (this.options.thumbnailIndicators) {\r\n        if (thumbnailProperty) {\r\n          thumbnailUrl = obj[\"thumbnail\"]\r\n        }\r\n        if (thumbnailUrl === undefined) {\r\n          thumbnail = obj.getElementsByTagName && $(obj).find('img')[0]\r\n          if (thumbnail) {\r\n            thumbnailUrl = thumbnail.src\r\n          }\r\n        }\r\n        if (thumbnailUrl) {\r\n          indicator.style.backgroundImage = 'url(\"' + thumbnailUrl + '\")'\r\n        }\r\n      }\r\n      if (title) {\r\n        indicator.title = title;\r\n      }\r\n      return indicator;\r\n    },\r\n\r\n    addIndicator: function (index) {\r\n      if (this.indicatorContainer.length) {\r\n        var indicator = this.createIndicator(this.list[index])\r\n        indicator.setAttribute('data-index', index)\r\n        this.indicatorContainer[0].appendChild(indicator)\r\n        this.indicators.push(indicator)\r\n      }\r\n    },\r\n\r\n    setActiveIndicator: function (index) {\r\n      if (this.indicators) {\r\n        if (this.activeIndicator) {\r\n          this.activeIndicator.removeClass(this.options.classes.activeIndicatorClass)\r\n        }\r\n        this.activeIndicator = $(this.indicators[index])\r\n        this.activeIndicator.addClass(this.options.classes.activeIndicatorClass)\r\n      }\r\n    },\r\n\r\n    slide: function (to, speed) {\r\n      window.clearTimeout(this.timeout)\r\n      var index = this.index\r\n      var direction\r\n      var naturalDirection\r\n      var diff\r\n      if (index === to || this.num === 1) {\r\n        return\r\n      }\r\n      if (!speed) {\r\n        speed = this.options.transitionSpeed\r\n      }\r\n      if (!this.options.continuous) {\r\n        to = this.circle(to)\r\n      }\r\n      // 1: backward, -1: forward:\r\n      direction = Math.abs(index - to) / (index - to)\r\n      // Get the actual position of the slide:\r\n      if (this.options.continuous) {\r\n        naturalDirection = direction\r\n        direction = -this.positions[this.circle(to)] / this.slideWidth\r\n        // If going forward but to < index, use to = slides.length + to\r\n        // If going backward but to > index, use to = -slides.length + to\r\n        if (direction !== naturalDirection) {\r\n          to = -direction * this.num + to\r\n        }\r\n      }\r\n      diff = Math.abs(index - to) - 1\r\n      // Move all the slides between index and to in the right direction:\r\n      while (diff) {\r\n        diff -= 1\r\n        this.move(\r\n          this.circle((to > index ? to : index) - diff - 1),\r\n          this.slideWidth * direction,\r\n          0\r\n        )\r\n      }\r\n      to = this.circle(to)\r\n      this.move(index, this.slideWidth * direction, speed)\r\n      this.move(to, 0, speed)\r\n      if (this.options.continuous) {\r\n        this.move(\r\n          this.circle(to - direction),\r\n          -(this.slideWidth * direction),\r\n          0\r\n        )\r\n      }\r\n\r\n      this.onslide(to)\r\n    },\r\n\r\n    getIndex: function () {\r\n      return this.index\r\n    },\r\n\r\n    getNumber: function () {\r\n      return this.num\r\n    },\r\n\r\n    prev: function () {\r\n      if (this.options.continuous || this.index) {\r\n        this.slide(this.index - 1)\r\n      }\r\n    },\r\n\r\n    next: function () {\r\n      if (this.options.continuous || this.index < this.num - 1) {\r\n        this.slide(this.index + 1)\r\n      }\r\n    },\r\n\r\n    play: function (time) {\r\n      var that = this\r\n      ///window.clearTimeout(this.timeout);\r\n      if (this.timeout) {\r\n        this.timeout.stop();\r\n        this.timeout = null;\r\n      }\r\n      this.interval = time || this.options.slideshowInterval\r\n      if (this.elements[this.index] > 1) {\r\n        this.timeout = langx.debounce(this.slide.bind(this),this.interval,true)(this.index + 1, this.options.slideshowTransitionSpeed);\r\n      }\r\n      this._velm.addClass(this.options.classes.playingClass)\r\n    },\r\n\r\n    pause: function () {\r\n      //window.clearTimeout(this.timeout)\r\n      if (this.timeout) {\r\n        this.timeout.stop();\r\n        this.timeout = null;\r\n      }\r\n      this.interval = null\r\n      //if (this.cancelAnimationFrame) {\r\n      //  this.cancelAnimationFrame.call(window, this.animationFrameId)\r\n      //  this.animationFrameId = null\r\n      //}\r\n      this._velm.removeClass(this.options.classes.playingClass)\r\n    },\r\n\r\n    add: function (list) {\r\n      var i\r\n      if (!list.concat) {\r\n        // Make a real array out of the list to add:\r\n        list = Array.prototype.slice.call(list)\r\n      }\r\n      if (!this.list.concat) {\r\n        // Make a real array out of the Gallery list:\r\n        this.list = Array.prototype.slice.call(this.list)\r\n      }\r\n      this.list = this.list.concat(list)\r\n      this.num = this.list.length\r\n      if (this.num > 2 && this.options.continuous === null) {\r\n        this.options.continuous = true\r\n        this._velm.removeClass(this.options.classes.leftEdgeClass)\r\n      }\r\n      this._velm\r\n        .removeClass(this.options.classes.rightEdgeClass)\r\n        .removeClass(this.options.classes.singleClass)\r\n      for (i = this.num - list.length; i < this.num; i += 1) {\r\n        this.addSlide(i)\r\n        this.positionSlide(i)\r\n      }\r\n      this.positions.length = this.num\r\n      this.initSlides(true)\r\n    },\r\n\r\n    resetSlides: function () {\r\n      this.slidesContainer.empty();\r\n      this.unloadAllSlides();\r\n      this.slides = [];\r\n      this.indicatorContainer.empty();\r\n      this.indicators = [];\r\n\r\n    },\r\n\r\n    handleClose: function () {\r\n      if (this.activeIndicator) {\r\n        this.activeIndicator.removeClass(this.options.classes.activeIndicatorClass)\r\n      }\r\n\r\n      var options = this.options\r\n      this.destroyEventListeners()\r\n      // Cancel the slideshow:\r\n      this.pause();\r\n      this._velm.hide();\r\n      this._velm.removeClass([options.displayClass,options.singleClass,options.leftEdgeClass,options.rightEdgeClass]);\r\n      if (options.hidePageScrollbars) {\r\n        document.body.style.overflow = this.bodyOverflowStyle\r\n      }\r\n      if (this.options.clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      if (this.options.onclosed) {\r\n        this.options.onclosed.call(this)\r\n      }\r\n    },\r\n\r\n    close: function () {\r\n      var that = this\r\n\r\n      function closeHandler(event) {\r\n        if (event.target === that._elm) {\r\n          that._velm.off(browser.support.transition.end, closeHandler)\r\n          that.handleClose()\r\n        }\r\n      }\r\n      if (this.options.onclose) {\r\n        this.options.onclose.call(this)\r\n      }\r\n      if (this.options.displayTransition) {\r\n        this._velm.on(browser.support.transition.end, closeHandler)\r\n        this._velm.removeClass(this.options.classes.displayClass)\r\n      } else {\r\n        this.handleClose()\r\n      }\r\n    },\r\n\r\n    circle: function (index) {\r\n      // Always return a number inside of the slides index range:\r\n      return (this.num + index % this.num) % this.num\r\n    },\r\n\r\n    move: function (index, dist, speed) {\r\n      this.translateX(index, dist, speed)\r\n      this.positions[index] = dist\r\n    },\r\n\r\n    translate: function (index, x, y, speed) {\r\n      var slide = this.slides[index];\r\n      styler.css(slide,\"transitionDuration\",speed + \"ms\");\r\n      styler.css(slide,\"transform\", 'translate(' + x + 'px, ' +  y +  'px)' +  ' translateZ(0)');\r\n\r\n    },\r\n\r\n    translateX: function (index, x, speed) {\r\n      this.translate(index, x, 0, speed)\r\n    },\r\n\r\n    translateY: function (index, y, speed) {\r\n      this.translate(index, 0, y, speed)\r\n    },\r\n\r\n    onresize: function () {\r\n      this.initSlides(true)\r\n    },\r\n\r\n    onmousedown: function (event) {\r\n      // Trigger on clicks of the left mouse button only\r\n      // and exclude video & audio elements:\r\n      if (\r\n        event.which &&\r\n        event.which === 1 &&\r\n        event.target.nodeName !== 'VIDEO' &&\r\n        event.target.nodeName !== 'AUDIO'\r\n      ) {\r\n        // Preventing the default mousedown action is required\r\n        // to make touch emulation work with Firefox:\r\n        event.preventDefault();\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchstart(event)\r\n      }\r\n    },\r\n\r\n    onmousemove: function (event) {\r\n      if (this.touchStart) {;\r\n        (event.originalEvent || event).touches = [{\r\n          pageX: event.pageX,\r\n          pageY: event.pageY\r\n        }]\r\n        this.ontouchmove(event)\r\n      }\r\n    },\r\n\r\n    onmouseup: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    onmouseout: function (event) {\r\n      if (this.touchStart) {\r\n        var target = event.target\r\n        var related = event.relatedTarget\r\n        if (!related || (related !== target && !noder.contains(target, related))) {\r\n          this.onmouseup(event)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchstart: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        eventer.stop(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      this.touchStart = {\r\n        // Remember the initial touch coordinates:\r\n        x: touches.pageX,\r\n        y: touches.pageY,\r\n        // Store the time to determine touch duration:\r\n        time: Date.now()\r\n      }\r\n      // Helper variable to detect scroll movement:\r\n      this.isScrolling = undefined\r\n      // Reset delta values:\r\n      this.touchDelta = {}\r\n    },\r\n\r\n    ontouchmove: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        eventer.stop(event)\r\n      }\r\n      // jQuery doesn't copy touch event properties by default,\r\n      // so we have to access the originalEvent object:\r\n      var touches = (event.originalEvent || event).touches[0]\r\n      var scale = (event.originalEvent || event).scale\r\n      var index = this.index\r\n      var touchDeltaX\r\n      var indices\r\n      // Ensure this is a one touch swipe and not, e.g. a pinch:\r\n      if (touches.length > 1 || (scale && scale !== 1)) {\r\n        return\r\n      }\r\n      if (this.options.disableScroll) {\r\n        event.preventDefault()\r\n      }\r\n      // Measure change in x and y coordinates:\r\n      this.touchDelta = {\r\n        x: touches.pageX - this.touchStart.x,\r\n        y: touches.pageY - this.touchStart.y\r\n      }\r\n      touchDeltaX = this.touchDelta.x\r\n      // Detect if this is a vertical scroll movement (run only once per touch):\r\n      if (this.isScrolling === undefined) {\r\n        this.isScrolling =\r\n          this.isScrolling ||\r\n          Math.abs(touchDeltaX) < Math.abs(this.touchDelta.y)\r\n      }\r\n      if (!this.isScrolling) {\r\n        // Always prevent horizontal scroll:\r\n        event.preventDefault()\r\n        // Stop the slideshow:\r\n        window.clearTimeout(this.timeout)\r\n        if (this.options.continuous) {\r\n          indices = [this.circle(index + 1), index, this.circle(index - 1)]\r\n        } else {\r\n          // Increase resistance if first slide and sliding left\r\n          // or last slide and sliding right:\r\n          this.touchDelta.x = touchDeltaX =\r\n            touchDeltaX /\r\n            ((!index && touchDeltaX > 0) ||\r\n              (index === this.num - 1 && touchDeltaX < 0) ?\r\n              Math.abs(touchDeltaX) / this.slideWidth + 1 :\r\n              1)\r\n          indices = [index]\r\n          if (index) {\r\n            indices.push(index - 1)\r\n          }\r\n          if (index < this.num - 1) {\r\n            indices.unshift(index + 1)\r\n          }\r\n        }\r\n        while (indices.length) {\r\n          index = indices.pop()\r\n          this.translateX(index, touchDeltaX + this.positions[index], 0)\r\n        }\r\n      } else {\r\n        this.translateY(index, this.touchDelta.y + this.positions[index], 0)\r\n      }\r\n    },\r\n\r\n    ontouchend: function (event) {\r\n      if (this.options.stopTouchEventsPropagation) {\r\n        eventer.stop(event)\r\n      }\r\n      var index = this.index\r\n      var speed = this.options.transitionSpeed\r\n      var slideWidth = this.slideWidth\r\n      var isShortDuration = Number(Date.now() - this.touchStart.time) < 250\r\n      // Determine if slide attempt triggers next/prev slide:\r\n      var isValidSlide =\r\n        (isShortDuration && Math.abs(this.touchDelta.x) > 20) ||\r\n        Math.abs(this.touchDelta.x) > slideWidth / 2\r\n      // Determine if slide attempt is past start or end:\r\n      var isPastBounds =\r\n        (!index && this.touchDelta.x > 0) ||\r\n        (index === this.num - 1 && this.touchDelta.x < 0)\r\n      var isValidClose = !isValidSlide &&\r\n        this.options.closeOnSwipeUpOrDown &&\r\n        ((isShortDuration && Math.abs(this.touchDelta.y) > 20) ||\r\n          Math.abs(this.touchDelta.y) > this.slideHeight / 2)\r\n      var direction\r\n      var indexForward\r\n      var indexBackward\r\n      var distanceForward\r\n      var distanceBackward\r\n      if (this.options.continuous) {\r\n        isPastBounds = false\r\n      }\r\n      // Determine direction of swipe (true: right, false: left):\r\n      direction = this.touchDelta.x < 0 ? -1 : 1\r\n      if (!this.isScrolling) {\r\n        if (isValidSlide && !isPastBounds) {\r\n          indexForward = index + direction\r\n          indexBackward = index - direction\r\n          distanceForward = slideWidth * direction\r\n          distanceBackward = -slideWidth * direction\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(indexForward), distanceForward, 0)\r\n            this.move(this.circle(index - 2 * direction), distanceBackward, 0)\r\n          } else if (indexForward >= 0 && indexForward < this.num) {\r\n            this.move(indexForward, distanceForward, 0)\r\n          }\r\n          this.move(index, this.positions[index] + distanceForward, speed)\r\n          this.move(\r\n            this.circle(indexBackward),\r\n            this.positions[this.circle(indexBackward)] + distanceForward,\r\n            speed\r\n          )\r\n          index = this.circle(indexBackward)\r\n          this.onslide(index)\r\n        } else {\r\n          // Move back into position\r\n          if (this.options.continuous) {\r\n            this.move(this.circle(index - 1), -slideWidth, speed)\r\n            this.move(index, 0, speed)\r\n            this.move(this.circle(index + 1), slideWidth, speed)\r\n          } else {\r\n            if (index) {\r\n              this.move(index - 1, -slideWidth, speed)\r\n            }\r\n            this.move(index, 0, speed)\r\n            if (index < this.num - 1) {\r\n              this.move(index + 1, slideWidth, speed)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (isValidClose) {\r\n          this.close()\r\n        } else {\r\n          // Move back into position\r\n          this.translateY(index, 0, speed)\r\n        }\r\n      }\r\n    },\r\n\r\n    ontouchcancel: function (event) {\r\n      if (this.touchStart) {\r\n        this.ontouchend(event)\r\n        delete this.touchStart\r\n      }\r\n    },\r\n\r\n    ontransitionend: function (event) {\r\n      var slide = this.slides[this.index]\r\n      if (!event || slide === event.target) {\r\n        if (this.interval) {\r\n          this.play()\r\n        }\r\n        ///this.setTimeout(this.options.onslideend, [this.index, slide])\r\n        langx.defer(this.options.onslideend, [this.index, slide]);\r\n      }\r\n    },\r\n\r\n    oncomplete: function (event) {\r\n      var target = event.target || event.srcElement\r\n      var parent = target && target.parentNode\r\n      var index\r\n      if (!target || !parent) {\r\n        return\r\n      }\r\n      index = this.getNodeIndex(parent)\r\n      $(parent).removeClass(this.options.classes.slideLoadingClass)\r\n      if (event.type === 'error') {\r\n        $(parent).addClass(this.options.classes.slideErrorClass)\r\n        this.elements[index] = 3 // Fail\r\n      } else {\r\n        this.elements[index] = 2 // Done\r\n      }\r\n      // Fix for IE7's lack of support for percentage max-height:\r\n      if (target.clientHeight > this._velm.clientHeight()) {\r\n        target.style.maxHeight = this._velm.clientHeight()\r\n      }\r\n      if (this.interval && this.slides[this.index] === parent) {\r\n        this.play()\r\n      }\r\n      ///this.setTimeout(this.options.onslidecomplete, [index, parent])\r\n      langx.defer(this.options.onslidecomplete, [index, parent]);\r\n    },\r\n\r\n    onload: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onerror: function (event) {\r\n      this.oncomplete(event)\r\n    },\r\n\r\n    onkeydown: function (event) {\r\n      switch (event.which || event.keyCode) {\r\n        case 13: // Return\r\n          if (this.options.toggleControlsOnReturn) {\r\n            eventer.stop(event)\r\n            this.toggleControls()\r\n          }\r\n          break\r\n        case 27: // Esc\r\n          if (this.options.closeOnEscape) {\r\n            this.close()\r\n            // prevent Esc from closing other things\r\n            event.stopImmediatePropagation()\r\n          }\r\n          break\r\n        case 32: // Space\r\n          if (this.options.toggleSlideshowOnSpace) {\r\n            eventer.stop(event)\r\n            this.toggleSlideshow()\r\n          }\r\n          break\r\n        case 37: // Left\r\n          if (this.options.enableKeyboardNavigation) {\r\n            eventer.stop(event)\r\n            this.prev()\r\n          }\r\n          break\r\n        case 39: // Right\r\n          if (this.options.enableKeyboardNavigation) {\r\n            eventer.stop(event)\r\n            this.next()\r\n          }\r\n          break\r\n      }\r\n    },\r\n\r\n    handleClick: function (event) {\r\n      var options = this.options\r\n      var target = event.target || event.srcElement\r\n      var parent = target.parentNode\r\n\r\n      if (parent === this.indicatorContainer[0]) {\r\n        // Click on indicator element\r\n        eventer.stop(event)\r\n        this.slide(this.getNodeIndex(target));\r\n        return;\r\n      } else if (parent.parentNode === this.indicatorContainer[0]) {\r\n        // Click on indicator child element\r\n        this.preventDefault(event)\r\n        this.slide(this.getNodeIndex(parent))\r\n        return;\r\n      }\r\n\r\n\r\n      function isTarget(className) {\r\n        return $(target).hasClass(className) || $(parent).hasClass(className)\r\n      }\r\n      if (isTarget(options.classes.toggleClass)) {\r\n        // Click on \"toggle\" control\r\n        eventer.stop(event)\r\n        this.toggleControls()\r\n      } else if (isTarget(options.classes.prevClass)) {\r\n        // Click on \"prev\" control\r\n        eventer.stop(event)\r\n        this.prev()\r\n      } else if (isTarget(options.classes.nextClass)) {\r\n        // Click on \"next\" control\r\n        eventer.stop(event)\r\n        this.next()\r\n      } else if (isTarget(options.classes.closeClass)) {\r\n        // Click on \"close\" control\r\n        eventer.stop(event)\r\n        this.close()\r\n      } else if (isTarget(options.classes.playPauseClass)) {\r\n        // Click on \"play-pause\" control\r\n        eventer.stop(event)\r\n        this.toggleSlideshow()\r\n      } else if (parent === this.slidesContainer[0]) {\r\n        // Click on slide background\r\n        if (options.closeOnSlideClick) {\r\n          eventer.stop(event)\r\n          this.close()\r\n        } else if (options.toggleControlsOnSlideClick) {\r\n          eventer.stop(event)\r\n          this.toggleControls()\r\n        }\r\n      } else if (\r\n        parent.parentNode &&\r\n        parent.parentNode === this.slidesContainer[0]\r\n      ) {\r\n        // Click on displayed element\r\n        if (options.toggleControlsOnSlideClick) {\r\n          eventer.stop(event)\r\n          this.toggleControls()\r\n        }\r\n      }\r\n    },\r\n\r\n    onclick: function (event) {\r\n      if (\r\n        this.options.emulateTouchEvents &&\r\n        this.touchDelta &&\r\n        (Math.abs(this.touchDelta.x) > 20 || Math.abs(this.touchDelta.y) > 20)\r\n      ) {\r\n        delete this.touchDelta\r\n        return\r\n      }\r\n      return this.handleClick(event)\r\n    },\r\n\r\n    updateEdgeClasses: function (index) {\r\n      if (!index) {\r\n        this._velm.addClass(this.options.classes.leftEdgeClass)\r\n      } else {\r\n        this._velm.removeClass(this.options.classes.leftEdgeClass)\r\n      }\r\n      if (index === this.num - 1) {\r\n        this._velm.addClass(this.options.classes.rightEdgeClass)\r\n      } else {\r\n        this._velm.removeClass(this.options.classes.rightEdgeClass)\r\n      }\r\n    },\r\n\r\n    handleSlide: function (index) {\r\n      if (!this.options.continuous) {\r\n        this.updateEdgeClasses(index)\r\n      }\r\n      this.loadElements(index)\r\n      if (this.options.unloadElements) {\r\n        this.unloadElements(index)\r\n      }\r\n      this.setTitle(index);\r\n      this.setActiveIndicator(index)\r\n    },\r\n\r\n    onslide: function (index) {\r\n      this.index = index\r\n      this.handleSlide(index)\r\n      ///this.setTimeout(this.options.onslide, [index, this.slides[index]])\r\n      langx.defer(this.options.onslide, [index, this.slides[index]]);\r\n    },\r\n\r\n    setTitle: function (index) {\r\n      var firstChild = this.slides[index].firstChild\r\n      var text = firstChild.title || firstChild.alt\r\n      var titleElement = this.titleElement\r\n      if (titleElement.length) {\r\n        this.titleElement.empty()\r\n        if (text) {\r\n          titleElement[0].appendChild(document.createTextNode(text))\r\n        }\r\n      }\r\n    },\r\n\r\n    createElement: function (obj, callback) {\r\n      var element = this.options.renderItem(obj, callback);\r\n      $(element).addClass(this.options.classes.slideContentClass);\r\n      return element;\r\n    },\r\n\r\n    loadElement: function (index) {\r\n      if (!this.elements[index]) {\r\n        if (this.slides[index].firstChild) {\r\n          this.elements[index] = $(this.slides[index]).hasClass(\r\n              this.options.classes.slideErrorClass\r\n            ) ?\r\n            3 :\r\n            2\r\n        } else {\r\n          this.elements[index] = 1 // Loading\r\n          $(this.slides[index]).addClass(this.options.classes.slideLoadingClass)\r\n          this.slides[index].appendChild(\r\n            this.createElement(this.list[index], this.proxyListener)\r\n          )\r\n        }\r\n      }\r\n    },\r\n\r\n    loadElements: function (index) {\r\n      var limit = Math.min(this.num, this.options.preloadRange * 2 + 1)\r\n      var j = index\r\n      var i\r\n      for (i = 0; i < limit; i += 1) {\r\n        // First load the current slide element (0),\r\n        // then the next one (+1),\r\n        // then the previous one (-2),\r\n        // then the next after next (+2), etc.:\r\n        j += i * (i % 2 === 0 ? -1 : 1)\r\n        // Connect the ends of the list to load slide elements for\r\n        // continuous navigation:\r\n        j = this.circle(j)\r\n        this.loadElement(j)\r\n      }\r\n    },\r\n\r\n    unloadElements: function (index) {\r\n      var i, diff\r\n      for (i in this.elements) {\r\n        if (this.elements.hasOwnProperty(i)) {\r\n          diff = Math.abs(index - i)\r\n          if (\r\n            diff > this.options.preloadRange &&\r\n            diff + this.options.preloadRange < this.num\r\n          ) {\r\n            this.unloadSlide(i)\r\n            delete this.elements[i]\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    addSlide: function (index) {\r\n      var slide = this.slidePrototype.cloneNode(false)\r\n      slide.setAttribute('data-index', index)\r\n      this.slidesContainer[0].appendChild(slide)\r\n      this.slides.push(slide);\r\n      this.addIndicator(index)\r\n\r\n    },\r\n\r\n    positionSlide: function (index) {\r\n      var slide = this.slides[index]\r\n      styler.css(slide,{\r\n         \"width\" : this.slideWidth + 'px' ,\r\n         \"left\" : index * -this.slideWidth + 'px'\r\n      });\r\n      this.move(\r\n        index,\r\n        this.index > index ?\r\n        -this.slideWidth :\r\n        this.index < index ? this.slideWidth : 0,\r\n        0\r\n      )\r\n    },\r\n\r\n    initSlides: function (reload) {\r\n      if (!reload) {\r\n        this.indicatorContainer = this._velm.query(\r\n          this.options.selectors.indicatorContainer\r\n        )\r\n        if (this.indicatorContainer.length) {\r\n          this.indicatorPrototype = document.createElement('li')\r\n          this.indicators = this.indicatorContainer[0].children\r\n        }\r\n      }\r\n\r\n      var clearSlides, i\r\n      if (!reload) {\r\n        this.positions = []\r\n        this.positions.length = this.num\r\n        this.elements = {}\r\n        this.imagePrototype = document.createElement('img')\r\n        this.elementPrototype = document.createElement('div')\r\n        this.slidePrototype = document.createElement('div')\r\n        $(this.slidePrototype).addClass(this.options.classes.slideClass)\r\n        this.slides = this.slidesContainer[0].children\r\n        clearSlides =\r\n          this.options.clearSlides || this.slides.length !== this.num\r\n      }\r\n      this.slideWidth = this._velm.clientWidth();\r\n      this.slideHeight = this._velm.clientHeight();\r\n      this.slidesContainer[0].style.width = this.num * this.slideWidth + 'px'\r\n      if (clearSlides) {\r\n        this.resetSlides()\r\n      }\r\n      for (i = 0; i < this.num; i += 1) {\r\n        if (clearSlides) {\r\n          this.addSlide(i)\r\n        }\r\n        this.positionSlide(i)\r\n      }\r\n      // Reposition the slides before and after the given index:\r\n      if (this.options.continuous) {\r\n        this.move(this.circle(this.index - 1), -this.slideWidth, 0)\r\n        this.move(this.circle(this.index + 1), this.slideWidth, 0)\r\n      }\r\n    },\r\n\r\n    unloadSlide: function (index) {\r\n      var slide, firstChild\r\n      slide = this.slides[index]\r\n      firstChild = slide.firstChild\r\n      if (firstChild !== null) {\r\n        slide.removeChild(firstChild)\r\n      }\r\n    },\r\n\r\n    unloadAllSlides: function () {\r\n      var i, len\r\n      for (i = 0, len = this.slides.length; i < len; i++) {\r\n        this.unloadSlide(i)\r\n      }\r\n    },\r\n\r\n    toggleControls: function () {\r\n\r\n      var controlsClass = this.options.classes.controlsClass\r\n      if (this._velm.hasClass(controlsClass)) {\r\n        this._velm.removeClass(controlsClass)\r\n      } else {\r\n        this._velm.addClass(controlsClass)\r\n      }\r\n    },\r\n\r\n    toggleSlideshow: function () {\r\n      if (!this.interval) {\r\n        this.play()\r\n      } else {\r\n        this.pause()\r\n      }\r\n    },\r\n\r\n    getNodeIndex: function (element) {\r\n      return parseInt(element.getAttribute('data-index'), 10)\r\n    },\r\n\r\n    initStartIndex: function () {\r\n      var index = this.options.index;\r\n\r\n      // Make sure the index is in the list range:\r\n      this.index = this.circle(parseInt(index, 10) || 0)\r\n    },\r\n\r\n    initEventListeners: function () {\r\n      var that = this\r\n      var slidesContainer = this.slidesContainer\r\n\r\n      function proxyListener(event) {\r\n        var type =\r\n          browser.support.transition.end === event.type ?\r\n          'transitionend' :\r\n          event.type\r\n        that['on' + type](event)\r\n      }\r\n      $(window).on('resize', proxyListener)\r\n      $(document.body).on('keydown', proxyListener)\r\n      this._velm.on('click', proxyListener)\r\n      if (touch.isTouchEnabled()) {\r\n        slidesContainer.on(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents) {\r\n        slidesContainer.on(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n\r\n      slidesContainer.on(browser.support.transition.end, proxyListener)\r\n      this.proxyListener = proxyListener\r\n    },\r\n\r\n    destroyEventListeners: function () {\r\n      var slidesContainer = this.slidesContainer\r\n      var proxyListener = this.proxyListener\r\n      $(window).off('resize', proxyListener)\r\n      $(document.body).off('keydown', proxyListener)\r\n      this._velm.off('click', proxyListener)\r\n      if (touch.isTouchEnabled()) {\r\n        slidesContainer.off(\r\n          'touchstart touchmove touchend touchcancel',\r\n          proxyListener\r\n        )\r\n      } else if (this.options.emulateTouchEvents ) {\r\n        slidesContainer.off(\r\n          'mousedown mousemove mouseup mouseout',\r\n          proxyListener\r\n        )\r\n      }\r\n      slidesContainer.off(browser.support.transition.end, proxyListener)\r\n    },\r\n\r\n    handleOpen: function () {\r\n      if (this.options.onopened) {\r\n        this.options.onopened.call(this)\r\n      }\r\n    },\r\n\r\n    initWidget: function () {\r\n      var that = this\r\n\r\n      function openHandler(event) {\r\n        if (event.target === that._elm) {\r\n          that._velm.off(browser.support.transition.end, openHandler)\r\n          that.handleOpen()\r\n        }\r\n      }\r\n      this.slidesContainer = this._velm\r\n        .query(this.options.selectors.slidesContainer)\r\n        .first()\r\n      if (!this.slidesContainer.length) {\r\n\r\n        return false\r\n      }\r\n      this.titleElement = this._velm.query(this.options.selectors.titleElement).first()\r\n      if (this.num === 1) {\r\n        this._velm.addClass(this.options.classes.singleClass)\r\n      }\r\n      if (this.options.onopen) {\r\n        this.options.onopen.call(this)\r\n      }\r\n      if (this.options.displayTransition) {\r\n        this._velm.on(browser.support.transition.end, openHandler)\r\n      } else {\r\n        this.handleOpen()\r\n      }\r\n      if (this.options.hidePageScrollbars) {\r\n        // Hide the page scrollbars:\r\n        this.bodyOverflowStyle = document.body.style.overflow\r\n        document.body.style.overflow = 'hidden'\r\n      }\r\n      this._velm.show();\r\n      this.initSlides()\r\n      this._velm.addClass(this.options.classes.displayClass)\r\n    }\r\n  });\r\n\r\n\r\n  plugins.register(Slidable);\r\n\r\n  return lists.Slidable = Slidable;\r\n});"]}