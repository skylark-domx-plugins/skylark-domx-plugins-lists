{"version":3,"sources":["Group.js"],"names":["define","langx","$","elmx","plugins","lists","Group","Plugin","inherit","klassName","pluginName","options","multiSelect","classes","active","selectors","item","template","checkable","icon","text","selected","state","Object","_construct","elm","this","overrided","self","velm","_velm","_elm","itemSelector","_$items","on","veItem","hasClass","value","data","undefined","index","_refresh","updates","findItem","valueOrIdx","isNumber","eq","filter","oldValue","removeClass","addClass","selectOneItem","register"],"mappings":";;;;;;;AAACA,QACC,sBACA,qBACA,oBACA,uBACA,WACA,SAASC,EAAMC,EAAEC,EAAKC,EAAQC,GAE5B,IAAIC,EAAQF,EAAQG,OAAOC,SACvBC,UAAY,QAEZC,WAAa,mBAEbC,SACCC,aAAa,EAEbC,SACEC,OAAS,UAIXC,WACEC,KAAO,MAIRA,MACEC,SAAW,6EACXC,WAAY,EACZH,WACEI,KAAO,cACPC,KAAO,gBAIZC,SAAW,GAGZC,OACED,SAAWE,QAGbC,WAAa,SAASC,EAAId,GACtBe,KAAKC,UAAUF,EAAId,GACnB,IAAIiB,EAAOF,KACPG,EAAOH,KAAKI,MAAQ3B,EAAKuB,KAAKK,MAC9BC,EAAeN,KAAKf,QAAQI,UAAUC,KAE1CU,KAAKO,QAAUJ,EAAK3B,EAAE8B,GAEtBH,EAAKK,GAAG,QAASF,EAAc,WAC3B,IAAIG,EAAShC,EAAKuB,MAElB,IAAKS,EAAOC,SAAS,YAAa,CAChC,IAAIC,EAAQF,EAAOG,KAAK,cACVC,IAAVF,IACFA,EAAQT,EAAKK,QAAQO,MAAMd,OAE7BE,EAAKP,SAAWgB,EAIlB,OAAO,IAEXX,KAAKL,SAAWK,KAAKf,QAAQU,UAIjCoB,SAAW,SAASC,GAClBhB,KAAKC,UAAUe,GACf,IAAId,EAAQF,KAEZ,SAASiB,EAASC,GAOhB,OALI3C,EAAM4C,SAASD,GACThB,EAAKK,QAAQa,GAAGF,GAEhBhB,EAAKK,QAAQc,OAAO,gBAAkBH,EAAa,MAa3DF,EAAkB,WAChBhB,KAAKf,QAAQC,cAJjB+B,EAMkBD,EAAkB,SAAEM,UANjBC,YAAYrB,EAAKjB,QAAQE,QAAQC,QALxD,SAAuB8B,GACrBD,EAASC,GAAYM,SAAStB,EAAKjB,QAAQE,QAAQC,QAWjDqC,CAAcT,EAAkB,SAAEL,YAW9C,OAFAjC,EAAQgD,SAAS9C,GAEVD,EAAMC,MAAQA","file":"../Group.js","sourcesContent":[" define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins\",\r\n  \"./lists\"\r\n],function(langx,$,elmx,plugins,lists){\r\n\r\n    var Group = plugins.Plugin.inherit({\r\n        klassName : \"Group\",\r\n\r\n        pluginName : \"domx.lists.group\",\r\n\r\n        options : {\r\n        \tmultiSelect: false,\r\n\r\n        \tclasses : {\r\n          \tactive : \"active\"\r\n        \t},\r\n\r\n\r\n        \tselectors : {\r\n          \titem : \"li\",                   // \".list-group-item\"\r\n\r\n        \t},\r\n\r\n          item : {\r\n            template : \"<span><i class=\\\"glyphicon\\\"></i><a href=\\\"javascript: void(0);\\\"></a> </span>\",\r\n            checkable : false,\r\n            selectors : {\r\n              icon : \" > span > i\",\r\n              text : \" > span > a\"\r\n            }\r\n          },\r\n\r\n        \tselected : 0\r\n        },\r\n\r\n        state : {\r\n          selected : Object\r\n        },\r\n\r\n        _construct : function(elm,options) {\r\n            this.overrided(elm,options);\r\n            var self = this,\r\n                velm = this._velm = elmx(this._elm),\r\n                itemSelector = this.options.selectors.item;\r\n\r\n            this._$items = velm.$(itemSelector);\r\n\r\n            velm.on('click', itemSelector, function () {\r\n                var veItem = elmx(this);\r\n\r\n                if (!veItem.hasClass('disabled')) {\r\n                  var value = veItem.data(\"value\");\r\n                  if (value === undefined) {\r\n                    value = self._$items.index(this);\r\n                  }\r\n                  self.selected = value;\r\n                }\r\n\r\n                //veItem.blur();\r\n                return false;\r\n            });\r\n            this.selected = this.options.selected;\r\n\r\n        },\r\n\r\n        _refresh : function(updates) {\r\n          this.overrided(updates);\r\n          var self  = this;\r\n\r\n          function findItem(valueOrIdx) {\r\n            var $item;\r\n            if (langx.isNumber(valueOrIdx)) {\r\n              $item = self._$items.eq(valueOrIdx);\r\n            } else {\r\n              $item = self._$items.filter('[data-value=\"' + valueOrIdx + '\"]');\r\n            }\r\n            return $item;\r\n          } \r\n                 \r\n          function selectOneItem(valueOrIdx) {\r\n            findItem(valueOrIdx).addClass(self.options.classes.active);\r\n          }\r\n\r\n          function unselectOneItem(valueOrIdx) {\r\n            findItem(valueOrIdx).removeClass(self.options.classes.active);\r\n          }\r\n\r\n          if (updates[\"selected\"]) {\r\n            if (this.options.multiSelect) {\r\n            } else {\r\n              unselectOneItem(updates[\"selected\"].oldValue);\r\n              selectOneItem(updates[\"selected\"].value);\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Group);\r\n\r\n  return lists.Group = Group;\r\n\r\n});\r\n\r\n\r\n\r\n"]}